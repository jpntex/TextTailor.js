/*! TextTailor.js - 0.1.1 - 2019-08-06 | https://github.com/jpntex/TextTailor.js | Copyright (c) 2019 JoÃ£o Teixeira (@jpntex) | MIT License */

!function(e,n){"use strict";var s={minFont:1,maxFont:9999,preWrapText:!1,lineHeight:1.45,resizable:!0,debounce:!1,fit:!0,ellipsis:!0,center:!1,justify:!1};function i(t,i){this.el=t,this.options=e.extend({},s,i),this.init()}i.prototype={init:function(){var t=this.options.minFont>this.options.maxFont;e(this.el);if(t&&n.console&&console.log("TextTailor error: minFont needs to be smaller than maxFont!"),this.HTML=this.el.innerHTML,!t){var i,s=this;this.options.resizable&&e(n).on("resize",function(){s.options.debounce?(clearTimeout(i),i=setTimeout(function(){s.start()},200)):s.start()}),this.start()}},start:function(){var t=e(this.el);this.el.innerHTML=this.HTML,t.wrapInner("<div/>"),this.wraped=e(this.el.firstChild),this.wraped.css({"line-height":this.options.lineHeight,tranform:"translateZ(0)",height:"auto"}),this.options.preWrapText&&this.wraped.css("white-space","pre-line"),this.maxHeight=t.height(),this.maxWidth=t.width(),this.fit().ellipsis().center().justify()},fit:function(){if(this.options.fit){var n=this,o=this.wraped,h=0,t=Math.round((this.options.maxFont+this.options.minFont)/2);o.css("fontSize",t);var i=function t(i,s,e){return 30==++h?i:i<=n.options.minFont?n.options.minFont:i>=n.options.maxFont?n.options.maxFont:s===e?s:(o.css("fontSize",i),o[0].scrollHeight<n.maxHeight?(o.css("fontSize",i+1),o[0].scrollHeight>=n.maxHeight?i:t(Math.round((e+i)/2),i,e)):(o.css("fontSize",i-1),t(Math.round((s+i)/2),s,i)))}(t,this.options.minFont,this.options.maxFont);o.css("fontSize",i)}return this},ellipsis:function(){if(this.options.ellipsis){var t=this.wraped;if(t.css({overflow:"hidden","text-overflow":"ellipsis"}),t.height()>this.maxHeight){var i=t.html();t.html("O");t.height();for(var s=1,e=i.length;s<e;){var n=Math.ceil((s+e)/2);t.html(i.slice(0,n)+"..."),t.height()<=this.maxHeight?s=n:e=n-1}t.html(i.slice(0,s)+"...")}}return this},center:function(){if(this.options.center){var t=e(this.el).css("position");"relative"!==t&&"absolute"!==t&&e(this.el).css("position","relative"),this.wraped.css({position:"absolute",width:this.wraped.width()+"px",left:"0",right:"0",top:"0",bottom:"0",height:this.wraped.height()+"px",margin:"auto"})}return this},justify:function(){return this.options.justify&&this.wraped.css({"text-align":"justify"}),this}},e.fn.textTailor=function(t){return this.each(function(){e.data(this,"TextTailor")||e.data(this,"TextTailor",new i(this,t))})}}(jQuery,window);